<!DOCTYPE html>
<html>
<head>
    <script>
            if (location.protocol != 'https:')
            {
                location.href = 'https:' + window.location.href.substring(window.location.protocol.length);
            }
    </script>
	<title>Nosce Lingua Latina ē wadsworth.tech</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900" rel="stylesheet">
    <link rel="stylesheet" href="LatinVocabStyles.css">
    <link id="favicon" rel="icon" type="image/png" href="/favicons/faviconBlue-32x32.png" sizes="32x32"/>
</head>
<body>
<!-- Version 0.6.0 -->
<!-- Add: How many you got right, submit button?, tool to study only the incorrect terms, more information/colors in the "correct" or "incorrect" display-->
<div class="top">
    <h1>Nosce Verba Latina!</h1>

    <p>This page is now a vocabulary studying app.<br>
    <a href="/main/">Click here to continue to wadsworth.tech proper.</a>
    </p>
</div>

<script type="text/javascript">
var ch25SansMacrons = [
  ["cunctor","1: to delay"],
  ["dedecus","dedecoris, n: dishonor, disgrace"],
  ["funda","fundae, f: sling"],
  ["obtestor","1: to call to witness, beseech, entreat"],
  ["pedem refero","referre, rettuli, relatum: to retreat"],
  ["prodo","prodere, prodidi, proditum: to betray, reveal"]
];

var ch25 = [
  ["cūnctor","1: to delay"],
  ["dēdecus","dēdecoris, n: dishonor, disgrace"],
  ["funda","fundae, f: sling"],
  ["obtestor","1: to call to witness, beseech, entreat"],
  ["pedem referō","referre, rettulī, relātum: to retreat"],
  ["prōdō","prōdere, prōdidī, prōditum: to betray, reveal"]
];

var ch28 = [
  ["continēns", "continentis: continuous, unbroken"],
  ["nāvēs solvō", "solvere, solvī, solūtum: to set sail"],
  ["portus", "portūs, m: port, haven, harbor"],
  ["propius", "nearer"],
  ["unde", "whence, from where"]
];

var ch27 = [
  ["arcessō", "arcessere, arcessīvī, arcessītum: to summon, send for, invite"],
  ["obses", "obsidis, c: hostage; pledge, security"],
  ["polliceor", "pollicērī, pollicitus sum: to promise, offer"],
  ["queror", "querī, questus sum: to complain, bewail, lament"],
  ["ultrō", "voluntarily; besides, moreover"],
  ["vinculum","vinculī, n: chain"]
];

var ch29 = [
  ["adflīgō","adflīgere, adflīxī, adflīctum: to overthrow, damage, injure"],
  ["aestus","aestūs, m: heat, boiling, surging, tide"],
  ["armāmenta","armāmentōrum, n pl: implements, gear, tackle, rigging"],
  ["dēligō","1: to bind, tie down, fasten, moor"],
  ["fūnis","fūnis, m: rope, cable"],
  ["hiems","hiemis, f: wintertime, winter"]
];

var ch30 = [
  ["clam", "secretly"],
  ["commeātus", "commeātūs, m: voyage, provisions"],
  ["dēdūcō", "dēdūcere, dēdūxī, dēductum: to lead down, bring, conduct"],
  ["exiguitās", "exiguitātis, f: scantiness, shortness"],
  ["impedīmentum", "impedīmentī, n: hindrance"],
  ["impedīmenta", "impedīmentōrum, n pl: baggage, baggage train"]
];

var ch30SansMacrons = [
  ["clam", "secretly"],
  ["commeatus", "commeatus, m: voyage, provisions"],
  ["deduco", "deducere, deduxi, deductum: to lead down, bring, conduct"],
  ["exiguitas", "exiguitatis, f: scantiness, shortness"],
  ["impedimentum", "impedimenti, n: hindrance"],
  ["impedimenta", "impedimentorum, n pl: baggage, baggage train"]
];

var ch31 = [
  ["aes","aeris, n: copper"],
  ["commodē","conveniently, readily, easily, fitly"],
  ["etsī","even if, although"],
  ["intermittō","intermittere, intermīsī, intermissum: to send between, intervene, separate, cease, delay, neglect, let pass"],
  ["obses","obsidis, c: hostage, pledge, security"]
];

var ch31SansMacrons = [
  ["aes","aeris, n: copper"],
  ["commode","conveniently, readily, easily, fitly"],
  ["etsi","even if, although"],
  ["intermitto","intermittere, intermisi, intermissum: to send between, intervene, separate, cease, delay, neglect, let pass"],
  ["obses","obsidis, c: hostage, pledge, security"]
];

var chapters = [
    [ch25, "De Bello Gallico Chapter 25"],
    [ch25SansMacrons, "De Bello Gallico Chapter 25: No Macrons"],
    [ch27, "De Bello Gallico Chapter 27"],
    [ch28, "De Bello Gallico Chapter 28"],
    [ch29, "De Bello Gallico Chapter 29"],
    [ch30, "De Bello Gallico Chapter 30"],
    [ch30SansMacrons, "De Bello Gallico Chapter 30: No Macrons"],
    [ch31, "De Bello Gallico Chapter 31"],
    [ch31SansMacrons, "De Bello Gallico Chapter 31: No Macrons"]
];

var chapterWords = ch25SansMacrons;
</script>

<a href="http://www.cs.waikato.ac.nz/~tetaka/PDF/Macron%20Vowels%20on%20a%20Mac%2010.6-7.pdf" style="margin-top: 8px;"><p style="margin-top: inherit;"> To use macrons in this app, you will need to download the Māori keyboard.</p></a>

<script type="text/javascript">
    for (var chaptersIndex = 0; chaptersIndex < chapters.length; chaptersIndex++)
{
    createButton(chapters[chaptersIndex][1]);
}

function createButton(value)
{
    var x = document.createElement("BUTTON");
    var t = document.createTextNode(value);
    x.appendChild(t);
    document.body.appendChild(x);
    x.id = value;
    x.style.backgroundColor = "#555";
    x.style.border = "none";
    x.style.marginRight = "8px";
    x.style.color = "white";
    x.style.height = "32px";
    x.style.marginTop = "16px";
    x.onmouseover = function(){
        x.style.border = "2px solid white";
        x.style.padding = "2px 4px 3px";
    };
    x.onmouseout = function(){
        x.style.border = "none";
        x.style.padding = "2px 6px 3px";
    };
    x.onclick = function(){
        for (var i = 0; i < chapters.length; i++)
        {
            if (x.id == chapters[i][1])
            {
                chapterWords = chapters[i][0];
                document.getElementById("currentChapter").innerText = chapters[i][1];
            }
        }
        runProgram(shuffle(chapterWords));
    };
}
</script>

<p id="currentChapter" style="margin-top: 32px; color: #555;">De Bello Gallico Chapter 25: No Macrons</p>

<button onclick="printStudy()">Study This Chapter</button>

<p id="prompt" style= "margin-top: 32px; font-size: 32px; margin-bottom: 16px;"></p>

<div id="inputBox">
<input id="textInput" placeholder="Answer" style="margin-right: 4px;" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
<span class="popup">
<img src="info.ico" width="16" height="16" style="margin-bottom: 16px" onclick="openInfoWindow()">
<span class="popupText" id="infoPopup" style="margin-bottom: 8px; margin-left: 12px; width: 400px; opacity: 0.5;" onclick="openInfoWindow()">To get the answer correct, you must input at least one correct English meaning.<br><br>Examples:<br>Prompt: "emō" Enter: "emere, ēmī, emptum: to buy"<br>Prompt: "finēs" Enter: "finium, n pl: territory"</span></span>
</div>

<p id="reaction" style="margin-top: 32px;"></p>

<p id="shouldStudy" style="margin-top: 32px;"></p>

<p id="study"></p>

<script type="text/javascript">

runProgram(shuffle(chapterWords));

function runProgram(words)
{
    var i = 0;

    var termsWrong = new Array();

    document.getElementById("prompt").innerText = words[i][0];

    document.getElementById("reaction").innerText = "";
    document.getElementById("shouldStudy").innerText = "";
    document.getElementById("study").innerText = "";

    removeIWasRightButton();

    var entered = false;

    getInput(i);

    function getInput(i)
    {
        document.getElementById("prompt").innerText = words[i][0];
        document.getElementById("textInput").value = "";
        document.getElementById("textInput").onchange = function(e)
        {
            if (!entered)
            {
                var response = document.getElementById("textInput").value;
                
                entered = true;

                var definitionWords = getDefinitionWords(i);

                var correctDefinition = false;

                removeIWasRightButton();

                for (var ind = 0; ind < definitionWords.length; ind++)
                {
                    if ((response.substring(response.indexOf(":") + 1)).indexOf(definitionWords[ind]) != -1)
                    {
                        correctDefinition = true;
                    }
                }
                
                if (response.substring(0, response.indexOf(":")) == words[i][1].substring(0, words[i][1].indexOf(":")) && correctDefinition)
                {
                    document.getElementById("reaction").innerText = "Good job! \n You said: " + words[i][0] + ": " + response;
                    document.getElementById("reaction").style.color = "green";
                }
                else
                {
                    document.getElementById("reaction").innerText = "Incorrect. \n You said: " + words[i][0] + ": " + response + "\nCorrect: " + words[i][0] + ": " + words[i][1];
                    document.getElementById("reaction").style.color = "#DE0000";
                    termsWrong.push(words[i][0] + ": " + words[i][1]);

                    var x = document.createElement("BUTTON");
                    var t = document.createTextNode("I was actually right");
                    x.appendChild(t);
                    var inputBox = document.getElementById("inputBox");
                    inputBox.insertBefore(x, inputBox.childNodes[4]);
                    x.id = "I was actually right";
                    x.style.backgroundColor = "green";
                    x.style.border = "none";
                    x.style.marginRight = "8px";
                    x.style.marginLeft = "2px";
                    x.style.color = "white";
                    x.style.height = "32px";
                    x.style.marginTop = "16px";
                    x.onmouseover = function(){
                        x.style.border = "2px solid white";
                        x.style.padding = "2px 4px 3px";
                    };
                    x.onmouseout = function(){
                        x.style.border = "none";
                        x.style.padding = "2px 6px 3px";
                    };
                    x.onclick = function(){
                        termsWrong.pop();
                        document.getElementById("reaction").innerText = "Good job! \n You said: " + words[i][0] + ": " + response;
                        document.getElementById("reaction").style.color = "green";
                        inputBox.removeChild(x);
                        if (document.getElementById("shouldStudy").innerText.length > 0)
                        {
                            termsWrongToString();
                            document.body.removeChild(document.getElementById("Study these words"));
                        }
                    };
                }
                
                entered = false;
                
                if (i < words.length - 1)
                {
                    getInput(i + 1);
                }
                else
                {
                    document.getElementById("prompt").innerText = "You are done.";
                    document.getElementById("textInput").value = "";
                    entered = true;

                    termsWrongToString();
                }

                function termsWrongToString()
                {
                    var termsWrongString = "";
                    for (var wrongI = 0; wrongI < termsWrong.length; wrongI++)
                    {
                        termsWrongString += termsWrong[wrongI] + "\n";
                    }
                    if (termsWrongString.length > 0)
                    {
                        document.getElementById("shouldStudy").innerText = "You got the following words wrong: \n \n" + termsWrongString;
                    
                        var x = document.createElement("BUTTON");
                        var t = document.createTextNode("Study these words");
                        x.appendChild(t);
                        document.body.appendChild(x);
                        x.id = "Study these words";
                        x.style.backgroundColor = "#DE0000";
                        x.style.border = "none";
                        x.style.marginRight = "8px";
                        x.style.color = "white";
                        x.style.height = "32px";
                        x.style.marginTop = "16px";
                        x.onmouseover = function(){
                            x.style.border = "2px solid #555";
                            x.style.padding = "2px 4px 3px";
                        };
                        x.onmouseout = function(){
                            x.style.border = "none";
                            x.style.padding = "2px 6px 3px";
                        };
                        x.onclick = function(){
                            var termsWrongCorrectFormat = new Array();

                            for (var i = 0; i < termsWrong.length; i++){
                                var thisWord = new Array();
                                thisWord[0] = termsWrong[i].substring(0, termsWrong[i].indexOf(": "));
                                thisWord[1] = termsWrong[i].substring(termsWrong[i].indexOf(": ") + ": ".length);
                                termsWrongCorrectFormat.push(thisWord);
                            }
                            runProgram(shuffle(termsWrongCorrectFormat));
                            document.body.removeChild(x);
                        };
                    }
                    else
                    {
                        document.getElementById("shouldStudy").innerText = "Well done. You got no words wrong!"
                    }
                }    
            }
        };
    }

    function removeIWasRightButton()
    {
        if (document.getElementById("I was actually right") != null)
        {
            document.getElementById("inputBox").removeChild(document.getElementById("I was actually right"));
        }
    }

    /**
    *   Parses the English definition of the Latin and inserts each parsed word
    *   of the English into an array.  Returns the array.
    *
    *   parameter i: the index of the current vocab in the 2D array called words
    **/
    function getDefinitionWords(i)
    {
        var correctWords = new Array(); //The array to contain the English words
        
        var correctDef = words[i][1].substring((words[i][1].indexOf(":") + 1)); //The full correct English definition

        //Cuts out words from right to left until the definition has length 0
        while (correctDef.length > 0)
        {
            //Handles the case where a comma comes after the word or where the current word is the last
            if (correctDef.indexOf(",") != -1)
            {
                var currentWord = correctDef.substring(0, correctDef.indexOf(",")); //The current English word
                
                //Removes "to" from before verbs
                if (currentWord.indexOf(" to") != -1)
                {
                    currentWord = currentWord.substring(currentWord.indexOf(" to") + 3);
                }

                //Removes spaces from before words
                while (currentWord.indexOf(" ") == 0)
                {
                    currentWord = currentWord.substring(1);
                }
                correctDef = correctDef.substring(correctDef.indexOf(",") + 1); //Cuts the current word from the definition
            }
            else
            {
                currentWord = correctDef;   //This is the last word so no splicing is necessary
                correctDef = "";            //Makes definition of length 0
                if (currentWord.indexOf(" to") != -1)
                {
                    currentWord = currentWord.substring(currentWord.indexOf(" to") + 3);
                }

                while (currentWord.indexOf(" ") == 0)
                {
                    currentWord = currentWord.substring(1);
                }
            } 
                correctWords.push(currentWord);
        }
        return correctWords;
    }
}

function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }
  return array;
}

function openInfoWindow()
{
    var info = document.getElementById("infoPopup");
    info.classList.toggle("show");
}
</script>

<script type="text/javascript">
    function printStudy()
    {
        var chapterAsString = "";

        for (var i = 0; i < chapterWords.length; i++)
        {
            chapterAsString += chapterWords[i][0] + ": " + chapterWords[i][1] + "\n";
        }

        if (document.getElementById("study").innerText == chapterAsString)
        {
            document.getElementById("study").innerText = "";
        }
        else
        {
            document.getElementById("study").innerText = chapterAsString;
        }
    }
</script>
</body>
</html>